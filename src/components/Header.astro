---
import DarkModeToggle from './DarkModeToggle.astro';

const currentPath = Astro.url.pathname;
---

<div id="picture-modal" class="fixed inset-0 z-[9999] bg-black/90 flex items-center justify-center opacity-0 pointer-events-none transition-opacity duration-300">
  <img src="/mypic.png" alt="Jake Estrada" class="max-w-md max-h-[80vh] object-contain rounded-lg" />
</div>

<header class="sticky top-0 z-50 bg-white/95 dark:bg-black/95 backdrop-blur-sm border-b border-neutral-200 dark:border-neutral-900">
  <nav class="container mx-auto px-6 md:px-12 py-4">
    <div class="flex items-center justify-between font-mono text-sm">
      <a href="/" id="header-name" class="text-neutral-900 dark:text-neutral-100 hover:opacity-70 transition-opacity cursor-pointer">
        <span class="terminal-prompt">jake@portfolio</span>:<span class="terminal-path">~</span>$
      </a>
      <div class="flex items-center gap-8">
        <a 
          href="/" 
          class={`transition-opacity hover:opacity-70 ${
            currentPath === '/' 
              ? 'text-neutral-900 dark:text-neutral-100' 
              : 'text-neutral-600 dark:text-neutral-400'
          }`}
        >
          ./home
        </a>
        <a 
          href="/projects" 
          class={`transition-opacity hover:opacity-70 ${
            currentPath.startsWith('/projects') 
              ? 'text-neutral-900 dark:text-neutral-100' 
              : 'text-neutral-600 dark:text-neutral-400'
          }`}
        >
          ./projects
        </a>
        <DarkModeToggle />
      </div>
    </div>
  </nav>
</header>

<script>
  document.addEventListener('DOMContentLoaded', () => {
    const headerName = document.getElementById('header-name');
    const pictureModal = document.getElementById('picture-modal');
    
    if (!headerName || !pictureModal) return;

    let isShowing = false;

    // Handle double click
    headerName.addEventListener('dblclick', (e) => {
      e.preventDefault();
      e.stopPropagation();
      
      // Show the picture
      isShowing = true;
      pictureModal.classList.remove('opacity-0', 'pointer-events-none');
      pictureModal.classList.add('opacity-100');
      
      // Auto-close after 2 seconds
      setTimeout(() => {
        pictureModal.classList.remove('opacity-100');
        pictureModal.classList.add('opacity-0', 'pointer-events-none');
        isShowing = false;
      }, 2000);
    });

    // Also allow clicking outside to close
    pictureModal.addEventListener('click', () => {
      pictureModal.classList.remove('opacity-100');
      pictureModal.classList.add('opacity-0', 'pointer-events-none');
      isShowing = false;
    });
  });
</script>
