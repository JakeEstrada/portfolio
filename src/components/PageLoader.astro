---
---

<div id="page-loader" class="fixed inset-0 z-[9998] bg-black text-green-400 dark:text-green-400 font-mono flex items-center justify-center opacity-0 pointer-events-none transition-opacity duration-200">
  <div class="w-full max-w-3xl px-6 md:px-12">
    <div class="mb-6 text-xs md:text-sm text-green-500/70">
      <div class="flex items-center gap-2 mb-2">
        <span class="terminal-prompt">jake@portfolio</span>:<span class="text-blue-400">~</span>$ 
        <span id="loader-cursor" class="inline-block w-2 h-4 bg-green-400 animate-pulse"> </span>
      </div>
    </div>
    <div id="loader-output" class="space-y-1 text-xs md:text-sm font-mono">
      <div class="text-green-300/70">Loading...</div>
    </div>
  </div>
</div>

<script is:inline>
  (function() {
    const loader = document.getElementById('page-loader');
    const cursor = document.getElementById('loader-cursor');
    
    if (!loader) return;

    function showLoader(message) {
      const output = document.getElementById('loader-output');
      if (output) {
        output.innerHTML = '<div class="text-green-300/70">' + message + '</div>';
      }
      loader.classList.remove('opacity-0', 'pointer-events-none');
      loader.classList.add('opacity-100');
      if (cursor) cursor.style.display = 'inline-block';
    }

    function hideLoader() {
      loader.classList.add('opacity-0', 'pointer-events-none');
      loader.classList.remove('opacity-100');
      setTimeout(function() {
        if (cursor) cursor.style.display = 'none';
      }, 200);
    }

    // Intercept link clicks
    document.addEventListener('click', function(e) {
      var target = e.target;
      while (target && target.tagName !== 'A') {
        target = target.parentElement;
      }
      
      if (target && target.href && target.href.indexOf(window.location.origin) === 0) {
        var href = target.getAttribute('href');
        if (href && href.indexOf('#') !== 0) {
          e.preventDefault();
          
          // Determine message based on route
          var message = 'Loading...';
          if (href.indexOf('/projects') !== -1 && href.split('/').length > 3) {
            message = 'Loading project...';
          } else if (href.indexOf('/projects') !== -1) {
            message = 'Loading all projects...';
          } else if (href === '/' || href.indexOf('/index') !== -1) {
            message = 'Loading home...';
          }
          
          showLoader(message);
          
          // Navigate after brief delay
          setTimeout(function() {
            window.location.href = href;
          }, 300);
        }
      }
    });

    // Hide loader when page loads
    window.addEventListener('load', function() {
      setTimeout(hideLoader, 200);
    });

    if (document.readyState === 'complete') {
      setTimeout(hideLoader, 200);
    } else {
      document.addEventListener('DOMContentLoaded', function() {
        setTimeout(hideLoader, 200);
      });
    }
  })();
</script>

<style>
  #page-loader {
    font-family: 'IBM Plex Mono', 'Monaco', 'Courier New', monospace;
  }
</style>
