---
import { getCollection } from 'astro:content';
import ProjectCard from './ProjectCard.astro';
import TerminalAnimation from './TerminalAnimation.astro';

const projects = await getCollection('projects');
const sortedProjects = projects.sort((a, b) => {
  const aOrder = a.data.order ?? 999;
  const bOrder = b.data.order ?? 999;
  return aOrder - bOrder;
});
---

<section class="container mx-auto px-6 md:px-12 py-24 border-b border-neutral-200 dark:border-neutral-900">
  <div class="max-w-4xl mx-auto text-center">
    <div class="mb-8">
      <TerminalAnimation command="ls -la projects/" output="Loading all projects..." targetId="projects-content" />
    </div>
    <div id="projects-content" class="content-hidden opacity-0">
      <h2 class="section-title">Projects</h2>
      <div>
        {sortedProjects.map((project) => (
          <div class="project-item">
            <ProjectCard
              title={project.data.title}
              summary={project.data.summary}
              tags={project.data.tags}
              heroImage={project.data.heroImage}
              slug={project.slug}
              featured={project.data.featured}
            />
          </div>
        ))}
      </div>
    </div>
  </div>
</section>
